{
    "enabled_groups": {
        "type": "list",
        "description": "启用分析功能的飞书群列表",
        "default": [],
        "hint": "填入允许使用分析功能的飞书群聊ID",
        "items": {
            "type": "string"
        }
    },
    "max_messages": {
        "type": "int",
        "description": "最大分析消息数量",
        "default": 1000,
        "hint": "单次分析的最大消息条数，建议500-2000"
    },
    "analysis_days": {
        "type": "int",
        "description": "默认分析天数",
        "default": 1,
        "hint": "默认分析最近几天的消息，建议1-7天"
    },
    "auto_analysis_time": {
        "type": "string",
        "description": "自动分析时间",
        "default": "09:00",
        "hint": "每日自动分析的时间，格式HH:MM"
    },
    "enable_auto_analysis": {
        "type": "bool",
        "description": "启用定时自动分析",
        "default": false,
        "hint": "是否在指定时间自动进行群聊分析，启用需要填写下面的机器人ID，并且确保群聊ID在 enabled_groups 配置中，否则获取不到实例，不会自动分析"
    },
    "bot_open_id": {
        "type": "string",
        "description": "机器人Open ID",
        "default": "",
        "hint": "用于自动分析的飞书机器人Open ID，填写后可启用自动分析功能"
    },
    "output_format": {
        "type": "string",
        "description": "输出格式",
        "default": "image",
        "hint": "分析报告的输出格式：image(图片)、text(文本)、pdf(PDF文件)。使用 PDF 需要额外配置，根据文件中的 PDF_功能说明.md 进行配置"
    },

    "min_messages_threshold": {
        "type": "int",
        "description": "最小消息数阈值",
        "default": 50,
        "hint": "进行分析所需的最小消息数量"
    },
    "topic_analysis_enabled": {
        "type": "bool",
        "description": "启用话题分析",
        "default": true,
        "hint": "是否使用LLM进行智能话题分析"
    },
    "user_title_analysis_enabled": {
        "type": "bool",
        "description": "启用用户称号分析",
        "default": true,
        "hint": "是否使用LLM进行用户称号分析"
    },
    "max_topics": {
        "type": "int",
        "description": "最大话题数量",
        "default": 5,
        "hint": "分析报告中显示的最大话题数量，依赖于 LLM 输出的格式化信息质量，模型越好结果越好，可能出现数量不匹配。"
    },
    "max_user_titles": {
        "type": "int",
        "description": "最大用户称号数量",
        "default": 8,
        "hint": "分析报告中显示的最大用户称号数量，依赖于 LLM 输出的格式化信息质量，模型越好结果越好，可能出现数量不匹配。"
    },
    "max_golden_quotes": {
        "type": "int",
        "description": "最大金句数量",
        "default": 5,
        "hint": "分析报告中显示的最大金句数量，依赖于 LLM 输出的格式化信息质量，模型越好结果越好，可能出现数量不匹配。"
    },
    "max_query_rounds": {
        "type": "int",
        "description": "最大消息查询轮数",
        "default": 35,
        "hint": "⚠️ 警告：增加此值会导致大量Token消耗！默认值35轮（有一定消耗）。设置过高可能导致LLM费用激增"
    },
    "llm_timeout": {
        "type": "int",
        "description": "LLM 请求超时时间（秒）",
        "default": 100,
        "hint": "LLM 单次请求的超时时间，单位秒。可根据模型响应速度适当调整，增大可减少超时失败，但会占用更多等待时间，思考模型可以根据情况进行调大。"
    },
    "llm_retries": {
        "type": "int",
        "description": "LLM 请求重试次数",
        "default": 2,
        "hint": "当请求超时或失败时自动重试的次数，建议设置为1~3之间。"
    },
    "llm_backoff": {
        "type": "int",
        "description": "LLM 请求重试退避基值（秒）",
        "default": 2,
        "hint": "重试之间的基准等待时间（秒），实际等待时间为基值乘以尝试次数。"
    },
    "custom_api_key": {
        "type": "string",
        "description": "自定义 LLM 服务 API Key (选填)",
        "default": "",
        "hint": "若使用自建或第三方的 LLM 服务，可在此填写 API Key；留空则使用 Astrbot 统一内置提供商。"
    },
    "custom_api_base_url": {
        "type": "string",
        "description": "自定义 LLM 服务 Base URL (选填)",
        "default": "",
        "hint": "自定义 LLM 服务的基础请求地址，例如 https://openrouter.ai/api/v1/chat/completions 。留空则使用 Astrbot 统一内置提供商。"
    },
    "custom_model_name": {
        "type": "string",
        "description": "自定义 LLM 模型名称 (选填)",
        "default": "",
        "hint": "自定义服务所使用的模型名称，例如 gpt-4 、deepseek/deepseek-r1:free 或自定义模型标识，由于自定义情况复杂，无法给出有效的参数参考，需要根据实际情况例如日志报错判断。留空则使用 Astrbot 统一内置提供商。"
    },
    "pdf_output_dir": {
        "type": "string",
        "description": "PDF输出目录",
        "default": "data/plugins/astrbot-lark-group-daily-analysis/reports",
        "hint": "PDF报告文件的保存目录"
    },
    "pdf_filename_format": {
        "type": "string",
        "description": "PDF文件名格式",
        "default": "群聊分析报告_{group_id}_{date}.pdf",
        "hint": "PDF文件名格式，支持变量：{group_id}(群聊ID)、{date}(日期)"
    }
}
